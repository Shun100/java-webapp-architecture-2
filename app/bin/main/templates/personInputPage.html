<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ユーザ登録</title>
</head>
<body>
  <form th:action="@{/confirm}" method="POST" th:object="${person}">
    <div th:if="*{personId} != 0">
      <span th:text="'ID: ' + *{personId}"></span>
    </div>

    <table border="0">
      <tr>
        <td>名前</td>
        <td><input type="text" th:field="*{personName}"></td>
        <!-- 
          エラー表示フィールド
          - th:if     : エラーがあるときだけ表示する。
          - #fields   : Thymeleafの内臓オブジェクト。 
            - BindingResultと連携して、特定のフォームフィールドにバリデーションエラーがあるかどうか確認したり、エラーメッセージを表示するために使用する。
          - th:errors : エラーメッセージを出力する。
        -->
        <td th:if="${#fields.hasErrors('personName')}"
            th:errors="*{personName}"
            style="color: red">
        </td>
      </tr>

      <tr>
        <td>年齢</td>
        <td><input type="text" th:field="*{age}"></td>
        <td th:if="${#fields.hasErrors('age')}"
            th:errors="*{age}"
            style="color: red">
        </td>
      </tr>

      <tr>
        <td>性別</td>
        <td>
          <input type="radio" th:field="*{gender}" id="gender-male" value="male">
          <label for="gender-male">男性</label>

          <input type="radio" th:field="*{gender}" id="gender-female" value="female">
          <label for="gender-female">女性</label>
        </td>
        <td th:if="${#fields.hasErrors('gender')}"
            th:errors="*{gender}"
            style="color: red">
        </td>
      </tr>
    </table>

    <div><input type="submit" value="確認画面へ"></div>

    <input type="hidden" name="personId" th:value="*{personId}">
  </form>
</body>
</html>